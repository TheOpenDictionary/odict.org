---
import { title, group } from "radash";

import { getCollection } from "astro:content";

import { sections } from "../constants";

import DocList from "./DocList.astro";

const docs = await getCollection("docs");
const groupedDocs = group(docs, (doc) => doc.slug.split("/")[0]);
---

<aside id="sidebar">
  <div class="absolute min-h-0 flex flex-col gap-8 py-4">
    {
      sections.map((parent) => (
        <DocList docs={groupedDocs[parent] ?? []} parent={parent} />
      ))
    }
  </div>
</aside>

<script lang="ts">
  // Maintain scroll position
  const id = document.location.pathname.split("/").slice(2).join("-");
  document.getElementById(id).scrollIntoView({ block: "center" });
</script>

<style lang="postcss"> 
  #sidebar {
    @apply w-[275px] border-r border-slate-100 flex-shrink-0 relative;
    @apply text-slate-600 font-sans p-4 text-base overflow-scroll;
  }
</style>
